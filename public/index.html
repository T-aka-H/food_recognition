// DOM読み込み完了後の初期化
document.addEventListener('DOMContentLoaded', function() {
    const fileInput = document.getElementById('fileInput');
    const uploadArea = document.getElementById('uploadArea');
    
    if (fileInput) {
        fileInput.addEventListener('change', handleFileUpload);
    }
    
    if (uploadArea) {
        uploadArea.addEventListener('click', function(e) {
            e.preventDefault();
            fileInput.click();
        });
    }
    
    // 分析ボタン
    const analyzeBtn = document.getElementById('analyzeBtn');
    if (analyzeBtn) {
        analyzeBtn.addEventListener('click', handleAnalyze);
    }
    
    // カスタム入力
    const customMenu = document.getElementById('customMenu');
    if (customMenu) {
        customMenu.addEventListener('input', (e) => {
            selectedMenu = e.target.value;
        });
    }
    
    // Safari用ボタンの表示制御
    if (isMobile && isSafari) {
        const safariButtons = document.querySelector('.safari-buttons');
        if (safariButtons) {
            safariButtons.style.display = 'grid';
        }
    }
});